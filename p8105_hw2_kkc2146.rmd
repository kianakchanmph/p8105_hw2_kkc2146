---
title: "Homework 2"
output: github_document
---

## Problem 1

```{r setup}
library(tidyverse)
library(readxl)
library(dplyr)
```
## load the trash data 

```{r}
trash_data = read_excel("Trash-Wheel-Collection-Totals-8-6-19.xlsx") %>% 
  janitor::clean_names() %>% 
  drop_na(dumpster) %>% 
  mutate(sports_balls = round(sports_balls, digits = 0))
```

##median number of sports balls in 2019

```{r}
median(trash_data$sports_balls)
```
## load the precipitation data, read and clean, omit rows without data, add variable for year. 

```{r}
precipitation_data2018 = read_excel("Trash-Wheel-Collection-Totals-8-6-19.xlsx", sheet = "2018 Precipitation", skip = 1) %>% 
  janitor::clean_names() %>% 
  drop_na() %>% 
  mutate(year = 2018)
  sum(precipitation_data2018[,'total'])
```
##total precipitation in 2018 
```{r}
sum(precipitation_data2018[,'total'])
```

```{r}
precipitation_data2019 = read_excel("Trash-Wheel-Collection-Totals-8-6-19.xlsx", sheet = "2019 Precipitation", skip = 1) %>% 
  janitor::clean_names() %>% 
  drop_na() %>% 
  mutate(year = 2019)
```

## Combine precipitation datasets and convert month to a character variable

```{r}
precipitation_data2018_2019 =
  bind_rows(precipitation_data2018, precipitation_data2019) %>% 
  mutate(month = month.name[as.numeric(month)])
```

## The trash_data dataset 344 total observations and 14 variables. The variables include information about each dumpster and the weight, volume, and contents of each dumpster. A few key variables include: month, year, date, weight (tons) of trash, volume (cubic yards), number of plastic bottles, number of sports balls, etc.The median number of sports balls in a dumpster in 2019 is 8.  The total precipitation in 2018 was 70.33 inches. 



## PROBLEM 2: This problem uses the FiveThirtyEight data; these data were gathered to create the interactive graphic on this page. In particular, we’ll use the data in pols-month.csv, unemployment.csv, and snp.csv. Our goal is to merge these into a single data frame using year and month as keys across datasets.

```{r setup}
library(readcsv)
```

## First, clean the data in pols-month.csv. Use separate() to break up the variable mon into integer variables year, month, and day; replace month number with month name; create a president variable taking values gop and dem, and remove prez_dem and prez_gop; and remove the day variable.

```{r}
pols_data = read_csv("fivethirtyeight_datasets/pols-month.csv") %>% 
  separate("mon", into = c("year", "month", "day")) %>% 
  mutate(
    month = month.name[as.numeric(month)],
    year = as.character(year),
    president  = recode(prez_dem, "0" = "dem", "1" = "gop", "1" = "gop")) %>% 
  select(-day, -prez_dem, -prez_gop)
```
## Second, clean the data in snp.csv using a similar process to the above. For consistency across datasets, arrange according to year and month, and organize so that year and month are the leading columns.
 
```{r}
snp_data = read_csv("fivethirtyeight_datasets/snp.csv") %>% 
  janitor::clean_names() %>% 
  separate("date", into = c("month", "day", "year"), convert = TRUE) %>% 
  mutate(
    year, year = if_else(year <= 15, year + 2000, year + 1900),
    year = as.character(year),
    month = month.name[as.numeric(month)]) %>% 
  arrange(year, month) %>% 
select(year, month, close)
```
## Third, tidy the unemployment data so that it can be merged with the previous datasets. This process will involve switching from “wide” to “long” format; ensuring that key variables have the same name; and ensuring that key variables take the same values.
```{r}
unemployment_data = read_csv("./fivethirtyeight_datasets/unemployment.csv") %>% 
  janitor::clean_names() %>% 
  pivot_longer(
    jan:dec, 
    names_to = "month",
    values_to = "unemployment") %>% 
  mutate(
    year = as.character(year),
    month = recode(month, 
    jan = "January", feb = "February", mar = "March", apr = "April", may = "May", jun = "June", jul = "July", aug = "August", sep = "September", oct = "October", nov = "November", dec = "December"))
```

## Join the datasets by merging snp into pols, and merging unemployment into the result.

```{r join datasets snp into pols}
snp_pols_data = 
  left_join(snp_data, pols_data)
```
```{r join datasets snp_pols_data into unemployment}
snp_pols_unemployment_data = 
  left_join(snp_pols_data, unemployment_data)
```
##Description of the FiveThirtyEight Datasets 

The pols_data dataset includes data on the number of politicians who are either democratic 'dem' or republican 'gop' at any given time (month and year). There are 822 observations and 9 variables. Key variables included in this dataset are: mon (date of the count), gov_gop (# of of gop senators on date), sen_gop, rep_dem, etc. 

The snp_data includes data on the Standard & Poor's stock market index (S&P), which is often used to represent the measure of the entire stock market. This dataset contains 787 observations and 2 varaibles, "date" (the date of observations) and "close" (the closing values of the S&P stock index on the assocated date).
 
The unemployment_data dataset contains 68 observations and 13 variables. Some of the key variables include 'year' (the year measurements) and the month, from January to December (percentage of employment per month)
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 )
  janitor::clean_names(pols_data) 
  separate(mon, into = c("year", "month", "day"), sep = 3)
  mutate(
    president = prez_dem + prez_gop
  )
  select(pols_data, -prez_dem, -prez_gop, -day)
## ASK TA HOW TO CREATE NEW VARIABLE CALLED PRESIDENT FROM GOP AND DEM, AND TO REMOVE DAY VAR
```{r}
pols_data = read_csv("./fivethirtyeight_datasets/pols-month.csv") 
  janitor::clean_names(pols_data) 
  mutate(
    president = prez_dem + prez_gop
  )
  select(pols_data, -prez_dem, -prez_gop)
```

```{r setup}
library(readcsv)
```
```{r}
pols_data = read_csv("./fivethirtyeight_datasets/pols-month.csv") 
  janitor::clean_names(pols_data) 



```{r}
trash_data = 
  left_join(precipitation_data2018, precipitation_data2019, by = "Month")
```


```{r}
rename(precipitation_data, GROUP = group, )
```





```{r}
trash_data %>%
  mutate_if(trash_data, sports_balls(is.numeric), round)
```

```{r}
trash_data =  
  read_excel("Trash-Wheel-Collection-Totals-8-6-19.xlsx") %>%
  mutate_if(trash_data, sports_balls(is.numeric), round)
```
